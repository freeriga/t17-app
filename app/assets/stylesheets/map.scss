/*
 *= require ./leaflet
 */

@import url('https://fonts.googleapis.com/css?family=Rubik:400,500,700&subset=cyrillic,latin-ext');

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  vertical-align: baseline;
  font-weight: inherit;
  font-family: inherit;
  font-style: inherit;
  font-size: 100%;
}

body { color: #111; }

html { font: 15px/1 rubik, helvetica, sans-serif; }
html.story { font-size: 18px; }
html.map body {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;

  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}

html.story body {
  padding: 1rem;
}

html.story h1 a {
  font-weight: normal;
  border-bottom: 0;
}

.index-column {
  position: relative;
  width: 34rem;
  -ms-flex-negative: 0;
  flex-shrink: 0;
  box-shadow: 10px 10px 50px 0px rgba(0,0,0,0.3);
  z-index: 9999;
  text-align: justify;
  color: #111;
}

html[data-lang=ru] .index-column {
  width: 36rem;
}

.map-column {
  -webkit-box-flex: 1;
  -ms-flex-positive: 1;
  flex-grow: 1;
}

.stories {
  padding-top: .25rem;
  padding-bottom: 1rem;
  padding-left: .5rem;
}

html.map h1 {
  text-align: center;
  padding: .5rem .5rem .5rem 1rem;
  background-color: white;
  border-bottom: 1px solid #ccc;
}

footer { padding: .5rem; text-align: center; }

.index-column { background-color: #fffff7; }

.summary p {
  padding-right: 1em;
  padding-bottom: .5em;
}

header, nav { padding-bottom: .5rem; }

html.map h1 a { font-weight: normal; text-decoration: none; border: 0; }

a { text-decoration: none; }

html.map h1 {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;

  -webkit-box-pack: justify;
  -ms-flex-pack: justify;
  justify-content: space-between;

  -ms-flex-negative: 0;
  flex-shrink: 0;

  align-items: center;
}

h1 { font-weight: bold; }

a { font-weight: 500; }
b { font-weight: bold; }

.stories a { font-weight: normal; }

.stories li { margin-bottom: .25rem; }

.map-column, .index-column {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -ms-flex-direction: column;
  flex-direction: column;
}

.map {
  -webkit-box-flex: 1;
  -ms-flex-positive: 1;
  flex-grow: 1;
  border: 1px solid #ccc;
}

html.map .map {
  border-width: 0 0 1px 1px;
}

.stories { overflow-y: auto; }

.map-icon.dim { background-color: lightgrey; border-color: grey; }

.map-icon:not(.link) { font-weight: normal; }
.map-icon:not(.link) { cursor: default; }
.link { cursor: pointer; }

html.story #mapelement {
  height: 16rem;
  width: 16rem;
  float: right;
  margin-left: 1rem;
  margin-top: .25rem;
  margin-bottom: .25rem;
}

html.story h3 {
  font-weight: bold;
  font-size: 140%;
  margin-top: .5rem;
  margin-bottom: .5rem;
}

html.story nav {
  clear: both;
}

h3 .number, .map-icon {
  display: inline-block;
  background-color: #ff6;
  border-radius: 50%;
  -webkit-box-shadow: 1px 1px 20px -5px rgba(20,20,0,0.75);
  -moz-box-shadow: 4px 4px 20px -5px rgba(20,20,0,0.75);
  box-shadow: inset 1px 1px 12px -5px rgba(20,20,0,0.75);
  font-size: 16px !important;
  width: 25px !important;
  height: 25px !important;
  line-height: 23px !important;
  border: 1px solid #cc0;
  vertical-align: middle;
  text-align: center;
  font-weight: 500;
}

html.banner .map-icon {
  font-size: 32px !important;
  width: 50px !important;
  height: 50px !important;
  line-height: 46px !important;
}

html.root-banner .map-icon {
  font-size: 20px !important;
  width: 30px !important;
  height: 30px !important;
  line-height: 32px !important;
}

.leaflet-container { font: inherit; }

.leaflet-popup-content-wrapper {
  background-color: rgba(255, 255, 255, 0.9);
}

.leaflet-popup-content {
  font-size: 1rem;
  font-family: inherit;
  line-height: 1.3;
}

.leaflet-popup-content p {
  margin: .5em 0;
  text-align: justify;
}

.leaflet-popup-content b {
  font-family: rubik, helvetica, sans-serif;
  font-weight: 500;
}

coords  { display: none !important; }
.summary { line-height: 1.3;  }

html.map h1, html.map footer { font-size: 110%; }

li.place .number-container { padding-right: .75em; }
li.place .name { vertical-align: -1px; }
li.place .name { font-size: 120%; text-align: left; }

li.place { display: table; }
li.place > * { display: table-row; }
li.place > * > * { display: table-cell; }

html.story body { max-width: 42em; margin: 1rem auto; }
html.story .stories { display: none; }
html.story header { width: 100%; }

article {
  line-height: 1.4;
  white-space: pre-line;
  text-align: justify;
}

aside {
  line-height: 1.2;
  margin: .5rem 1rem .75rem .5rem;
}

@media (max-width: 900px) { header { width: 100%; } }

.name, .map-icon, li.place, aside {
  transition: 0.5s linear all;
}

.stories.shade .place:not(.highlight),
.stories.shade aside,
#mapelement.shade .map-icon:not(.highlight) {
  opacity: 0.5;
}

#mapelement.shade .map-icon:not(.highlight) {
  background-color: #eea;
}

.map-icon.highlight { z-index: 9999 !important; }

.arrow { font-size: 180%; }
.next { float: right; }

html.story .snippet {
  font-style: italic;
  margin-bottom: 1rem;
}

#banner-map {
  width: 1200px;
  height: 630px;
  border: 0;
}

html.banner #index { display: none; }
html.banner header, html.root-banner header {
  z-index: 9999; position: absolute;
  font-size: 43px;
  width: 1200px;
  line-height: 1;
}

html.banner header {
  top: 0px;
}

html.root-banner header {
  top: 120px;
  text-align: center;
}

html.banner header {
  display: flex;
  justify-content: space-between;
  padding: 2em 1em;
}

html.banner h1 {
  flex-shrink: 0;
  text-align: right;
  margin-bottom: 4em;
  font-weight: 500;
  font-size: 32px;
  background-color: white;
  padding: .1em .25em;
}

html.banner h2 div {
  background-color: white;
  padding: .1em .25em;
  font-weight: bold;
}

html.map .fb-like {
  display: block;
  float: right;
  margin: 0 0 .25em 1em;
  opacity: 0.9;
}

html.map h1 img {
  height: 1.5rem;
  width: 1.5rem;
}

.flags {
  height: 1.5rem;
}

.flags img:first-child {
  margin-right: .5em;
}

html.map h1 { line-height: 1.3rem; }

.language-choices span { font-weight: normal; }

html.root-banner .stories { display: none; }
html.root-banner #mapelement {
  width: 1200px;
  height: 630px;
  border: 0;
}

html.root-banner header {
  display: inline-block;
}

html.root-banner h1 {
  display: inline-block;
  background-color: white;
  padding: .2em;

}

@media print {
  html.story header { display: none; }
  .leaflet-control-zoom { display: none; }
  html.story nav { display: none; }
  .fb-like { display: none; }
}